(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{107:function(e,t,r){},108:function(e,t,r){"use strict";r.r(t);var n,c,a,s,u,o,i=r(0),b=r.n(i),j=r(28),l=r.n(j),d=r(14),O=r(15),h=r(48),f=r(29),g=r(2),p=r(18),m=r(49),x=r.n(m),v=r(3),k=r(8),S=r(16),C=S.a.fetchItemsRequest,E=S.a.fetchItemsSuccess,I=S.a.fetchItemsError,_=S.a.addItemRequest,y=S.a.addItemSuccess,U=S.a.addItemError,R=S.a.deleteItemRequest,q=S.a.deleteItemSuccess,A=S.a.deleteItemError,N=S.a.changeFilter,w=Object(g.c)([],(n={},Object(v.a)(n,E,(function(e,t){return t.payload})),Object(v.a)(n,y,(function(e,t){var r=t.payload;return[].concat(Object(f.a)(e),[r])})),Object(v.a)(n,q,(function(e,t){var r=t.payload;return e.filter((function(e){return e.id!==r}))})),n)),L=Object(g.c)("",Object(v.a)({},N,(function(e,t){return t.payload}))),z=Object(g.c)(!1,(c={},Object(v.a)(c,C,(function(){return!0})),Object(v.a)(c,E,(function(){return!1})),Object(v.a)(c,I,(function(){return!1})),Object(v.a)(c,_,(function(){return!0})),Object(v.a)(c,y,(function(){return!1})),Object(v.a)(c,U,(function(){return!1})),Object(v.a)(c,R,(function(){return!0})),Object(v.a)(c,q,(function(){return!1})),Object(v.a)(c,A,(function(){return!1})),c)),T=Object(k.b)({items:w,filter:L,loading:z}),H=r(4),M={name:"",email:""},F=Object(g.c)(M,(a={},Object(v.a)(a,H.a.registerSuccess,(function(e,t){return t.payload.user})),Object(v.a)(a,H.a.loginSuccess,(function(e,t){return t.payload.user})),Object(v.a)(a,H.a.logoutSuccess,(function(){return M})),Object(v.a)(a,H.a.getCurrentUserSuccess,(function(e,t){return t.payload})),a)),J=Object(g.c)("",(s={},Object(v.a)(s,H.a.registerSuccess,(function(e,t){return t.payload.token})),Object(v.a)(s,H.a.loginSuccess,(function(e,t){return t.payload.token})),Object(v.a)(s,H.a.logoutSuccess,(function(){return""})),s)),W=Object(g.c)(!1,(u={},Object(v.a)(u,H.a.registerSuccess,(function(){return!0})),Object(v.a)(u,H.a.loginSuccess,(function(){return!0})),Object(v.a)(u,H.a.getCurrentUserSuccess,(function(){return!0})),Object(v.a)(u,H.a.loginError,(function(){return!1})),Object(v.a)(u,H.a.logoutError,(function(){return!1})),Object(v.a)(u,H.a.getCurrentUserError,(function(){return!1})),Object(v.a)(u,H.a.logoutSuccess,(function(){return!1})),u)),B=Object(g.c)("",(o={},Object(v.a)(o,H.a.registerError,(function(e,t){return t.payload})),Object(v.a)(o,H.a.loginError,(function(e,t){return t.payload})),Object(v.a)(o,H.a.logoutError,(function(e,t){return t.payload})),Object(v.a)(o,H.a.getCurrentUserError,(function(e,t){return t.payload})),o)),G=Object(k.b)({user:F,token:J,isAuthenticated:W,error:B}),P=Object(f.a)(Object(g.d)({serializableCheck:{ignoredActions:[p.a,p.f,p.b,p.c,p.d,p.e]}})),D={key:"auth",storage:x.a,whitelist:["token"]},Y=Object(g.a)({reducer:{auth:Object(p.g)(D,G),contacts:T},middleware:P,devTools:!1}),Z={store:Y,persistor:Object(p.h)(Y)},K=r(35),Q=r(36),V=r(38),X=r(37),$=r(7),ee=r(25),te=r(50),re=r.n(te),ne=r(1),ce=function(e){var t=e.children;return Object(ne.jsx)("div",{className:re.a.Container,children:t})},ae=function(e){return e.auth.isAuthenticated},se=function(e){return e.auth.user.name},ue=r(22),oe=r.n(ue),ie=function(){return Object(ne.jsxs)("ul",{className:oe.a.AuthNav,children:[Object(ne.jsx)("li",{children:Object(ne.jsx)(O.b,{to:"/register",className:oe.a.link,activeClassName:oe.a.activeLink,children:"Register"})}),Object(ne.jsx)("li",{children:Object(ne.jsx)(O.b,{to:"/login",className:oe.a.link,activeClassName:oe.a.activeLink,children:"Login"})})]})},be=r(34),je=r.n(be),le={onLogout:ee.a.logout},de=Object(d.b)((function(e){return{name:se(e)}}),le)((function(e){var t=e.name,r=e.onLogout;return Object(ne.jsxs)("div",{className:je.a.UserMenu,children:[Object(ne.jsxs)("span",{children:["Welcome, ",t]}),Object(ne.jsx)("button",{type:"button",onClick:r,className:je.a.button,children:"Logout"})]})})),Oe=r(21),he=r.n(Oe),fe=function(e){var t=e.isAuthenticated;return Object(ne.jsxs)("header",{className:he.a.Header,children:[Object(ne.jsxs)("ul",{className:he.a.list,children:[Object(ne.jsx)("li",{children:Object(ne.jsx)(O.b,{exact:!0,to:"/",className:he.a.link,activeClassName:he.a.activeLink,children:"Home"})}),t&&Object(ne.jsx)("li",{children:Object(ne.jsx)(O.b,{to:"/contacts",className:he.a.link,activeClassName:he.a.activeLink,children:"Contacts"})})]}),t?Object(ne.jsx)(de,{}):Object(ne.jsx)(ie,{})]})};fe.defaultProps={isAuthenticated:!1};var ge=Object(d.b)((function(e){return{isAuthenticated:ae(e)}}))(fe),pe=r(19),me=r(30),xe=["component","isAuthenticated","redirectTo"],ve=Object(d.b)((function(e){return{isAuthenticated:ae(e)}}))((function(e){var t=e.component,r=e.isAuthenticated,n=e.redirectTo,c=Object(me.a)(e,xe);return Object(ne.jsx)($.b,Object(pe.a)(Object(pe.a)({},c),{},{render:function(e){return r?Object(ne.jsx)(t,Object(pe.a)({},e)):Object(ne.jsx)($.a,{to:n})}}))})),ke=["component","isAuthenticated","redirectTo"],Se=function(e){var t=e.component,r=e.isAuthenticated,n=e.redirectTo,c=Object(me.a)(e,ke);return Object(ne.jsx)($.b,Object(pe.a)(Object(pe.a)({},c),{},{render:function(e){return r&&c.restricted?Object(ne.jsx)($.a,{to:n}):Object(ne.jsx)(t,Object(pe.a)({},e))}}))};Se.defaultProps={redirectTo:"/contacts"};var Ce=Object(d.b)((function(e){return{isAuthenticated:ae(e)}}))(Se),Ee=r(52),Ie=r.n(Ee),_e=function(){return Object(ne.jsx)(Ie.a,{type:"Circles",color:"#3f51b5",height:100,width:100})},ye=Object(i.lazy)((function(){return r.e(3).then(r.bind(null,120))})),Ue=Object(i.lazy)((function(){return r.e(4).then(r.bind(null,117))})),Re=Object(i.lazy)((function(){return r.e(6).then(r.bind(null,118))})),qe=Object(i.lazy)((function(){return r.e(5).then(r.bind(null,119))})),Ae=function(e){Object(V.a)(r,e);var t=Object(X.a)(r);function r(){return Object(K.a)(this,r),t.apply(this,arguments)}return Object(Q.a)(r,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(ne.jsxs)(ce,{children:[Object(ne.jsx)(ge,{}),Object(ne.jsx)(i.Suspense,{fallback:Object(ne.jsx)(_e,{}),children:Object(ne.jsxs)($.d,{children:[Object(ne.jsx)(Ce,{exact:!0,path:"/",component:Ue}),Object(ne.jsx)(ve,{path:"/contacts",component:ye,redirectTo:"/login"}),Object(ne.jsx)(Ce,{path:"/register",component:Re,redirectTo:"/contacts",restricted:!0}),Object(ne.jsx)(Ce,{path:"/login",component:qe,redirectTo:"/contacts",restricted:!0}),Object(ne.jsx)($.a,{to:"/"})]})})]})}}]),r}(i.Component),Ne={onGetCurrentUser:ee.a.getCurrentUser},we=Object(d.b)(null,Ne)(Ae);r(106),r(107);l.a.render(Object(ne.jsx)(b.a.StrictMode,{children:Object(ne.jsx)(d.a,{store:Z.store,children:Object(ne.jsx)(h.a,{loading:Object(ne.jsx)(_e,{}),persistor:Z.persistor,children:Object(ne.jsx)(O.a,{children:Object(ne.jsx)(we,{})})})})}),document.getElementById("root"))},16:function(e,t,r){"use strict";var n=r(2),c=Object(n.b)("contacts/fetchItemsRequest"),a=Object(n.b)("contacts/fetchItemsSuccess"),s=Object(n.b)("contacts/fetchItemsError"),u=Object(n.b)("contacts/addItemRequest"),o=Object(n.b)("contacts/addItemSuccess"),i=Object(n.b)("contacts/addItemError"),b=Object(n.b)("contacts/deleteItemRequest"),j=Object(n.b)("contacts/deleteItemSuccess"),l=Object(n.b)("contacts/deleteItemError"),d=Object(n.b)("contacts/changeFilter");t.a={fetchItemsRequest:c,fetchItemsSuccess:a,fetchItemsError:s,addItemRequest:u,addItemSuccess:o,addItemError:i,deleteItemRequest:b,deleteItemSuccess:j,deleteItemError:l,changeFilter:d}},21:function(e,t,r){e.exports={Header:"Header_Header__3-ums",list:"Header_list__2jJf4",link:"Header_link__2Z0Mt",activeLink:"Header_activeLink__28ui9"}},22:function(e,t,r){e.exports={AuthNav:"AuthNav_AuthNav__1irrk",link:"AuthNav_link__1eWWI",activeLink:"AuthNav_activeLink__3wFLE"}},25:function(e,t,r){"use strict";var n=r(17),c=r.n(n),a=r(24),s=r(20),u=r.n(s),o=r(4),i=o.a.registerRequest,b=o.a.registerSuccess,j=o.a.registerError,l=o.a.loginRequest,d=o.a.loginSuccess,O=o.a.loginError,h=o.a.logoutRequest,f=o.a.logoutSuccess,g=o.a.logoutError,p=o.a.getCurrentUserRequest,m=o.a.getCurrentUserSuccess,x=o.a.getCurrentUserError;u.a.defaults.baseURL="https://connections-api.herokuapp.com";var v=function(e){u.a.defaults.headers.common.Authorization="Bearer ".concat(e)},k=function(){u.a.defaults.headers.common.Authorization=""};t.a={register:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(r){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(i()),t.prev=1,t.next=4,u.a.post("/users/signup",e);case 4:n=t.sent,a=n.data,v(a.token),r(b(a)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),r(j(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},login:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(r){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(l()),t.prev=1,t.next=4,u.a.post("/users/login",e);case 4:n=t.sent,a=n.data,v(a.token),r(d(a)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),r(O(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(h()),e.prev=1,e.next=4,u.a.post("/users/logout");case 4:k(),t(f()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(g(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t,r){var n,a,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r(),a=n.auth.token){e.next=3;break}return e.abrupt("return");case 3:return v(a),t(p()),e.prev=5,e.next=8,u.a.get("/users/current");case 8:s=e.sent,o=s.data,t(m(o)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),t(x(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()}}},34:function(e,t,r){e.exports={UserMenu:"UserMenu_UserMenu__2zFYt",button:"UserMenu_button__2IlUs"}},4:function(e,t,r){"use strict";var n=r(2),c=Object(n.b)("auth/registerRequest"),a=Object(n.b)("auth/registerSuccess"),s=Object(n.b)("auth/registerError"),u=Object(n.b)("auth/loginRequest"),o=Object(n.b)("auth/loginSuccess"),i=Object(n.b)("auth/loginError"),b=Object(n.b)("auth/logoutRequest"),j=Object(n.b)("auth/logoutSuccess"),l=Object(n.b)("auth/logoutError"),d=Object(n.b)("auth/getCurrentUserRequest"),O=Object(n.b)("auth/getCurrentUserSuccess"),h=Object(n.b)("auth/getCurrentUserError");t.a={registerRequest:c,registerSuccess:a,registerError:s,loginRequest:u,loginSuccess:o,loginError:i,logoutRequest:b,logoutSuccess:j,logoutError:l,getCurrentUserRequest:d,getCurrentUserSuccess:O,getCurrentUserError:h}},50:function(e,t,r){e.exports={Container:"Container_Container__z--Sd"}}},[[108,1,2]]]);
//# sourceMappingURL=main.3262f7ea.chunk.js.map